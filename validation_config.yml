# validation_config.yml

validations:
  - task_key: "validate_dim_users"
    source_catalog: "source_postgres_prod"
    source_schema: "public"
    source_table: "users"
    target_catalog: "main"
    target_schema: "migrated"
    target_table: "dim_users"
    primary_keys: ["user_id"]
    count_tolerance: 0.0
    pk_row_hash_check: true
    pk_hash_threshold: 0.01
    agg_validations:
      - column: "user_age"
        validations:
          - { agg: "avg", tolerance: 0.05 }

  - task_key: "validate_fact_transactions"
    source_catalog: "source_postgres_prod"
    source_schema: "public"
    source_table: "transactions"
    target_catalog: "main"
    target_schema: "migrated"
    target_table: "fact_transactions"
    primary_keys: ["transaction_id"]
    count_tolerance: 0.001
    pk_row_hash_check: true
    hash_columns: ["transaction_id", "user_id", "amount"]
